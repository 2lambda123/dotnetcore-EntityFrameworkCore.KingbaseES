using System.Globalization;
using System.Text;

namespace Kdbndp.EntityFrameworkCore.KingbaseES.Storage.Internal.Mapping;

/// <summary>
///     This is an internal API that supports the Entity Framework Core
///     infrastructure and not subject to the same compatibility standards as
///     public APIs. It may be changed or removed without notice in any release.
///     You should only use it directly in your code with extreme caution and
///     knowing that doing so can result in application failures when updating
///     to a new Entity Framework Core release.
/// </summary>
public class KdbndpPointTypeMapping : KdbndpTypeMapping {
  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public static KdbndpPointTypeMapping Default { get; } = new();

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public KdbndpPointTypeMapping()
      : base("point", typeof(KdbndpPoint), KdbndpDbType.Point) {}

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected KdbndpPointTypeMapping(RelationalTypeMappingParameters parameters)
      : base(parameters, KdbndpDbType.Point) {}

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected override
      RelationalTypeMapping Clone(RelationalTypeMappingParameters parameters) =>
          new KdbndpPointTypeMapping(parameters);

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected override string GenerateNonNullSqlLiteral(object value) {
    var point = (KdbndpPoint)value;
    return FormattableString.Invariant(
        $"POINT '({point.X:G17},{point.Y:G17})'");
  }

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public override Expression GenerateCodeLiteral(object value) {
    var point = (KdbndpPoint)value;
    return Expression.New(Constructor, Expression.Constant(point.X),
                          Expression.Constant(point.Y));
  }

  private static readonly ConstructorInfo Constructor =
      typeof(KdbndpPoint)
          .GetConstructor(new[] { typeof(double), typeof(double) })!;
}

/// <summary>
///     This is an internal API that supports the Entity Framework Core
///     infrastructure and not subject to the same compatibility standards as
///     public APIs. It may be changed or removed without notice in any release.
///     You should only use it directly in your code with extreme caution and
///     knowing that doing so can result in application failures when updating
///     to a new Entity Framework Core release.
/// </summary>
public class KdbndpLineTypeMapping : KdbndpTypeMapping {
  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public static KdbndpLineTypeMapping Default { get; } = new();

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public KdbndpLineTypeMapping()
      : base("line", typeof(KdbndpLine), KdbndpDbType.Line) {}

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected KdbndpLineTypeMapping(RelationalTypeMappingParameters parameters)
      : base(parameters, KdbndpDbType.Line) {}

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected override
      RelationalTypeMapping Clone(RelationalTypeMappingParameters parameters) =>
          new KdbndpLineTypeMapping(parameters);

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected override string GenerateNonNullSqlLiteral(object value) {
    var line = (KdbndpLine)value;
    var a = line.A.ToString("G17", CultureInfo.InvariantCulture);
    var b = line.B.ToString("G17", CultureInfo.InvariantCulture);
    var c = line.C.ToString("G17", CultureInfo.InvariantCulture);
    return $"LINE '{{{a},{b},{c}}}'";
  }

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public override Expression GenerateCodeLiteral(object value) {
    var line = (KdbndpLine)value;
    return Expression.New(Constructor, Expression.Constant(line.A),
                          Expression.Constant(line.B),
                          Expression.Constant(line.C));
  }

  private static readonly ConstructorInfo Constructor =
      typeof(KdbndpLine)
          .GetConstructor(
              new[] { typeof(double), typeof(double), typeof(double) })!;
}

/// <summary>
///     This is an internal API that supports the Entity Framework Core
///     infrastructure and not subject to the same compatibility standards as
///     public APIs. It may be changed or removed without notice in any release.
///     You should only use it directly in your code with extreme caution and
///     knowing that doing so can result in application failures when updating
///     to a new Entity Framework Core release.
/// </summary>
public class KdbndpLineSegmentTypeMapping : KdbndpTypeMapping {
  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public static KdbndpLineSegmentTypeMapping Default { get; } = new();

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public KdbndpLineSegmentTypeMapping()
      : base("lseg", typeof(KdbndpLSeg), KdbndpDbType.LSeg) {}

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected KdbndpLineSegmentTypeMapping(
      RelationalTypeMappingParameters parameters)
      : base(parameters, KdbndpDbType.LSeg) {}

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected override
      RelationalTypeMapping Clone(RelationalTypeMappingParameters parameters) =>
          new KdbndpLineSegmentTypeMapping(parameters);

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected override string GenerateNonNullSqlLiteral(object value) {
    var lseg = (KdbndpLSeg)value;
    return FormattableString.Invariant(
        $"LSEG '[({lseg.Start.X:G17},{lseg.Start.Y:G17}),({lseg.End.X:G17},{lseg.End.Y:G17})]'");
  }

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public override Expression GenerateCodeLiteral(object value) {
    var lseg = (KdbndpLSeg)value;
    return Expression.New(Constructor, Expression.Constant(lseg.Start.X),
                          Expression.Constant(lseg.Start.Y),
                          Expression.Constant(lseg.End.X),
                          Expression.Constant(lseg.End.Y));
  }

  private static readonly ConstructorInfo Constructor =
      typeof(KdbndpLSeg)
          .GetConstructor(new[] { typeof(double), typeof(double),
                                  typeof(double), typeof(double) })!;
}

/// <summary>
///     This is an internal API that supports the Entity Framework Core
///     infrastructure and not subject to the same compatibility standards as
///     public APIs. It may be changed or removed without notice in any release.
///     You should only use it directly in your code with extreme caution and
///     knowing that doing so can result in application failures when updating
///     to a new Entity Framework Core release.
/// </summary>
public class KdbndpBoxTypeMapping : KdbndpTypeMapping {
  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public static KdbndpBoxTypeMapping Default { get; } = new();

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public KdbndpBoxTypeMapping()
      : base("box", typeof(KdbndpBox), KdbndpDbType.Box) {}

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected KdbndpBoxTypeMapping(RelationalTypeMappingParameters parameters)
      : base(parameters, KdbndpDbType.Box) {}

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected override
      RelationalTypeMapping Clone(RelationalTypeMappingParameters parameters) =>
          new KdbndpBoxTypeMapping(parameters);

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected override string GenerateNonNullSqlLiteral(object value) {
    var box = (KdbndpBox)value;
    return FormattableString.Invariant(
        $"BOX '(({box.Right:G17},{box.Top:G17}),({box.Left:G17},{box.Bottom:G17}))'");
  }

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public override Expression GenerateCodeLiteral(object value) {
    var box = (KdbndpBox)value;
    return Expression.New(Constructor, Expression.Constant(box.Top),
                          Expression.Constant(box.Right),
                          Expression.Constant(box.Bottom),
                          Expression.Constant(box.Left));
  }

  private static readonly ConstructorInfo Constructor =
      typeof(KdbndpBox).GetConstructor(new[] { typeof(double), typeof(double),
                                               typeof(double),
                                               typeof(double) })!;
}

/// <summary>
///     This is an internal API that supports the Entity Framework Core
///     infrastructure and not subject to the same compatibility standards as
///     public APIs. It may be changed or removed without notice in any release.
///     You should only use it directly in your code with extreme caution and
///     knowing that doing so can result in application failures when updating
///     to a new Entity Framework Core release.
/// </summary>
public class KdbndpPathTypeMapping : KdbndpTypeMapping {
  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public static KdbndpPathTypeMapping Default { get; } = new();

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public KdbndpPathTypeMapping()
      : base("path", typeof(KdbndpPath), KdbndpDbType.Path) {}

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected KdbndpPathTypeMapping(RelationalTypeMappingParameters parameters)
      : base(parameters, KdbndpDbType.Path) {}

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected override
      RelationalTypeMapping Clone(RelationalTypeMappingParameters parameters) =>
          new KdbndpPathTypeMapping(parameters);

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected override string GenerateNonNullSqlLiteral(object value) {
    var path = (KdbndpPath)value;
    var sb = new StringBuilder();
    sb.Append("PATH '");
    sb.Append(path.Open ? '[' : '(');
    for (var i = 0; i < path.Count; i++) {
      sb.Append('(');
      sb.Append(path[i].X.ToString("G17", CultureInfo.InvariantCulture));
      sb.Append(',');
      sb.Append(path[i].Y.ToString("G17", CultureInfo.InvariantCulture));
      sb.Append(')');
      if (i < path.Count - 1) {
        sb.Append(',');
      }
    }

    sb.Append(path.Open ? ']' : ')');
    sb.Append('\'');
    return sb.ToString();
  }

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public override Expression GenerateCodeLiteral(object value) {
    var path = (KdbndpPath)value;
    return Expression.New(
        Constructor,
        Expression.NewArrayInit(
            typeof(KdbndpPoint),
            path.Select(p => Expression.New(PointConstructor,
                                            Expression.Constant(p.X),
                                            Expression.Constant(p.Y)))),
        Expression.Constant(path.Open));
  }

  private static readonly ConstructorInfo Constructor =
      typeof(KdbndpPath)
          .GetConstructor(
              new[] { typeof(IEnumerable<KdbndpPoint>), typeof(bool) })!;

  private static readonly ConstructorInfo PointConstructor =
      typeof(KdbndpPoint)
          .GetConstructor(new[] { typeof(double), typeof(double) })!;
}

/// <summary>
///     This is an internal API that supports the Entity Framework Core
///     infrastructure and not subject to the same compatibility standards as
///     public APIs. It may be changed or removed without notice in any release.
///     You should only use it directly in your code with extreme caution and
///     knowing that doing so can result in application failures when updating
///     to a new Entity Framework Core release.
/// </summary>
public class KdbndpPolygonTypeMapping : KdbndpTypeMapping {
  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public static KdbndpPolygonTypeMapping Default { get; } = new();

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public KdbndpPolygonTypeMapping()
      : base("polygon", typeof(KdbndpPolygon), KdbndpDbType.Polygon) {}

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected KdbndpPolygonTypeMapping(RelationalTypeMappingParameters parameters)
      : base(parameters, KdbndpDbType.Polygon) {}

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected override
      RelationalTypeMapping Clone(RelationalTypeMappingParameters parameters) =>
          new KdbndpPolygonTypeMapping(parameters);

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected override string GenerateNonNullSqlLiteral(object value) {
    var polygon = (KdbndpPolygon)value;
    var sb = new StringBuilder();
    sb.Append("POLYGON '(");
    for (var i = 0; i < polygon.Count; i++) {
      sb.Append('(');
      sb.Append(polygon[i].X.ToString("G17", CultureInfo.InvariantCulture));
      sb.Append(',');
      sb.Append(polygon[i].Y.ToString("G17", CultureInfo.InvariantCulture));
      sb.Append(')');
      if (i < polygon.Count - 1) {
        sb.Append(',');
      }
    }

    sb.Append(")'");
    return sb.ToString();
  }

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public override Expression GenerateCodeLiteral(object value) {
    var polygon = (KdbndpPolygon)value;
    return Expression.New(
        Constructor,
        Expression.NewArrayInit(
            typeof(KdbndpPoint),
            polygon.Select(p => Expression.New(PointConstructor,
                                               Expression.Constant(p.X),
                                               Expression.Constant(p.Y)))));
  }

  private static readonly ConstructorInfo Constructor =
      typeof(KdbndpPolygon).GetConstructor(new[] { typeof(KdbndpPoint[]) })!;

  private static readonly ConstructorInfo PointConstructor =
      typeof(KdbndpPoint)
          .GetConstructor(new[] { typeof(double), typeof(double) })!;
}

/// <summary>
///     This is an internal API that supports the Entity Framework Core
///     infrastructure and not subject to the same compatibility standards as
///     public APIs. It may be changed or removed without notice in any release.
///     You should only use it directly in your code with extreme caution and
///     knowing that doing so can result in application failures when updating
///     to a new Entity Framework Core release.
/// </summary>
public class KdbndpCircleTypeMapping : KdbndpTypeMapping {
  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public static KdbndpCircleTypeMapping Default { get; } = new();

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public KdbndpCircleTypeMapping()
      : base("circle", typeof(KdbndpCircle), KdbndpDbType.Circle) {}

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected KdbndpCircleTypeMapping(RelationalTypeMappingParameters parameters)
      : base(parameters, KdbndpDbType.Circle) {}

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected override
      RelationalTypeMapping Clone(RelationalTypeMappingParameters parameters) =>
          new KdbndpCircleTypeMapping(parameters);

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  protected override string GenerateNonNullSqlLiteral(object value) {
    var circle = (KdbndpCircle)value;
    return FormattableString.Invariant(
        $"CIRCLE '<({circle.X:G17},{circle.Y:G17}),{circle.Radius:G17}>'");
  }

  /// <summary>
  ///     This is an internal API that supports the Entity Framework Core
  ///     infrastructure and not subject to the same compatibility standards as
  ///     public APIs. It may be changed or removed without notice in any
  ///     release. You should only use it directly in your code with extreme
  ///     caution and knowing that doing so can result in application failures
  ///     when updating to a new Entity Framework Core release.
  /// </summary>
  public override Expression GenerateCodeLiteral(object value) {
    var circle = (KdbndpCircle)value;
    return Expression.New(Constructor, Expression.Constant(circle.X),
                          Expression.Constant(circle.Y),
                          Expression.Constant(circle.Radius));
  }

  private static readonly ConstructorInfo Constructor =
      typeof(KdbndpCircle)
          .GetConstructor(
              new[] { typeof(double), typeof(double), typeof(double) })!;
}
